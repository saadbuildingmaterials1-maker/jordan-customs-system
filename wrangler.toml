name = "jordan-customs-system"
main = "dist/_worker.js"
compatibility_date = "2024-12-16"

[env.production]
name = "jordan-customs-system-prod"
routes = [
  { pattern = "jordan-customs-system.manus.space/*", zone_name = "manus.space" },
  { pattern = "mp3-app.com/*", zone_name = "mp3-app.com" },
  { pattern = "www.mp3-app.com/*", zone_name = "mp3-app.com" }
]

[build]
command = "npm run build"
cwd = "."
watch_paths = ["client/src/**/*.tsx", "client/src/**/*.ts"]

[build.upload]
format = "modules"
main = "./dist/_worker.js"

[observability]
enabled = true

[limits]
cpu_ms = 50

# Cache configuration
[env.production.vars]
CACHE_CONTROL_ASSETS = "public, max-age=31536000, immutable"
CACHE_CONTROL_HTML = "public, max-age=3600"
CACHE_CONTROL_API = "no-cache, no-store, must-revalidate"
