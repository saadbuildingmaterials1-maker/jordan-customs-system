# نظام إدارة تكاليف الشحن والجمارك الأردنية - خطة التطوير الشاملة المحدثة

## المرحلة 1: الصفحة الرئيسية والحاسبة ✅

- [x] تصميم الصفحة الرئيسية
- [x] إنشاء صفحة Calculator
- [x] إصلاح جميع الأزرار والروابط
- [x] اختبار الحاسبة

## المرحلة 2: قاعدة البيانات والبنية التحتية ✅

- [x] تصميم جدول الشحنات (shipments)
- [x] تصميم جدول البيانات الجمركية (customs_declarations)
- [x] تصميم جدول حالات الشحن (shipment_statuses)
- [x] إنشاء schema في drizzle/schema.ts
- [x] تنفيذ db:push
- [x] إضافة جدول الحاويات (containers)
- [x] إضافة جدول تتبع الحاويات (container_tracking)
- [x] إضافة متغيرات المطور للنظام

## المرحلة 3: صفحة تتبع الحاويات

- [ ] إنشاء صفحة ContainerTracking.tsx
- [ ] نموذج إدخال رقم الحاوية
- [ ] عرض تفاصيل الحاوية
- [ ] عرض timeline لحركة الحاوية
- [ ] إضافة tRPC procedures للحاويات

## المرحلة 4: صفحة إدارة الشحنات والحاويات

- [x] إنشاء صفحة Shipments.tsx (قائمة الشحنات)
- [x] إضافة نموذج إضافة شحنة جديدة
- [ ] دمج إدارة الحاويات مع الشحنات
- [ ] إضافة فلترة وبحث متقدم
- [ ] إضافة tRPC procedures (getShipments, createShipment, updateShipment)

## المرحلة 5: صفحة البيان الجمركي

- [ ] إنشاء صفحة CustomsDeclaration.tsx
- [ ] نموذج إنشاء بيان جمركي
- [ ] حساب الرسوم الجمركية تلقائياً
- [ ] عرض تفاصيل البيان
- [ ] طباعة/تصدير البيان PDF
- [ ] إضافة tRPC procedures (createDeclaration, getDeclarations)

## المرحلة 6: Dashboard (لوحة التحكم)

- [ ] إنشاء صفحة Dashboard.tsx
- [ ] عرض إحصائيات (عدد الشحنات، الحاويات، التكاليف)
- [ ] رسوم بيانية (Charts) للشحنات والحاويات
- [ ] آخر الشحنات والحاويات
- [ ] الشحنات النشطة
- [ ] إضافة tRPC procedure (getDashboardStats)

## المرحلة 7: صفحات الاشتراكات والخطط

- [ ] إنشاء صفحة Pricing.tsx (الخطط والأسعار)
- [ ] عرض الخطط المتاحة (مجاني، أساسي، احترافي، مؤسسي)
- [ ] مقارنة الميزات بين الخطط
- [ ] زر الاشتراك لكل خطة
- [ ] صفحة إدارة الاشتراك للمستخدم

## المرحلة 8: صفحة المطور ومن نحن

- [ ] إنشاء صفحة About.tsx (من نحن)
- [ ] معلومات عن النظام
- [ ] رؤية ورسالة المشروع
- [ ] إنشاء صفحة Developer.tsx (المطور)
- [ ] معلومات المطور (الاسم، البريد، الهاتف)
- [ ] روابط التواصل الاجتماعي
- [ ] معرض الأعمال

## المرحلة 9: صفحات السياسات

- [ ] إنشاء صفحة PrivacyPolicy.tsx (سياسة الخصوصية)
- [ ] إنشاء صفحة TermsOfService.tsx (شروط الاستخدام)
- [ ] إنشاء صفحة FAQ.tsx (الأسئلة الشائعة)
- [ ] إنشاء صفحة Contact.tsx (اتصل بنا)

## المرحلة 10: Navigation والتنقل

- [ ] إنشاء Header/Navbar رئيسي
- [ ] إضافة روابط التنقل (الرئيسية، الحاسبة، التتبع، الشحنات، Dashboard)
- [ ] إضافة Footer مع روابط السياسات
- [ ] تحديث App.tsx بجميع المسارات
- [ ] إضافة قائمة المستخدم (تسجيل دخول/خروج)

## المرحلة 11: ميزات إضافية

- [ ] نظام الإشعارات
- [ ] تصدير التقارير PDF/Excel
- [ ] طباعة البيانات الجمركية
- [ ] نظام البحث المتقدم
- [ ] فلترة متقدمة للشحنات والحاويات

## المرحلة 12: الاختبار والنشر

- [ ] اختبار جميع الصفحات
- [ ] اختبار جميع الوظائف
- [ ] فحص يدوي شامل لكل زر ورابط
- [ ] التأكد من عمل تتبع الحاويات
- [ ] حفظ checkpoint نهائي
- [ ] النشر على جميع النطاقات
- [ ] فحص نهائي بعد النشر

## معلومات المطور (للاستخدام في الصفحات)

- **الاسم**: [سيتم إضافته من بيانات النظام]
- **البريد الإلكتروني**: DEVELOPER_EMAIL
- **الهاتف**: DEVELOPER_PHONE
- **الاسم في النظام**: DEVELOPER_NAME


## المرحلة المكتملة: بناء نظام متكامل الجمركي وتوزيع التكاليف

### متطلبات البيان الجمركي:
- [ ] إنشاء جدول customs_declarations في قاعدة البيانات
- [ ] إنشاء جدول declaration_items للأصناف
- [ ] إضافة حقول توزيع التكاليف
- [ ] بناء صفحة إنشاء بيان جمركي جديد
- [ ] نموذج إدخال معلومات البيان الأساسية
- [ ] نموذج إضافة الأصناف للبيان
- [ ] حساب تلقائي لضريبة المبيعات 16%
- [ ] توزيع تلقائي للرسوم على الأصناف
- [ ] عرض ملخص التكاليف
- [ ] طباعة/تصدير البيان PDF
- [ ] ربط البيان بالحاوية

### متطلبات تتبع الحاويات:
- [ ] صفحة تتبع الحاويات بالرقم
- [ ] عرض timeline للحاوية
- [ ] عرض البيانات الجمركية المرتبطة
- [ ] عرض الأصناف داخل الحاوية
- [ ] حساب التكاليف الإجمالية

### متطلبات Dashboard:
- [ ] إحصائيات الحاويات النشطة
- [ ] إحصائيات البيانات الجمركية
- [ ] رسوم بيانية للتكاليف
- [ ] تقارير شهرية

### متطلبات الصفحات الإضافية:
- [ ] صفحة المطور (معلومات سعد النابلسي)
- [ ] صفحة من نحن
- [ ] صفحة سياسة الخصوصية
- [ ] صفحة شروط الاستخدام
- [ ] صفحة اتصل بنا

### متطلبات Navigation:
- [ ] قائمة تنقل رئيسية
- [ ] روابط جميع الصفحات
- [ ] تصميم احترافي متجاوب


## متطلبات استيراد البيان الجمركي من PDF

- [x] إضافة زر رفع ملف PDF
- [x] استخدام AI لقراءة البيان من PDF
- [x] استخراج معلومات البيان الأساسية تلقائياً
- [x] استخراج الأصناف من الجدول تلقائياً
- [x] استخراج الرسوم والتكاليف تلقائياً
- [x] توزيع التكاليف تلقائياً على الأصناف
- [x] عرض النتائج للمراجعة
- [x] إمكانية التعديل اليدوي
- [ ] حفظ البيان في قاعدة البيانات (backend)
- [x] طباعة/تصدير البيان كـ PDF (زر جاهز)


## المهام الجديدة المطلوبة

### صفحة تسجيل الدخول
- [ ] إنشاء صفحة Login.tsx
- [ ] تصميم نموذج تسجيل الدخول
- [ ] ربط نظام Manus OAuth
- [ ] إضافة زر تسجيل الخروج في Navigation

### صفحة الاشتراكات والخطط
- [x] إنشاء صفحة Pricing.tsx
- [x] تصميم بطاقات الخطط (مجاني، أساسي، احترافي، مؤسسي)
- [x] إضافة مقارنة الميزات
- [x] إضافة أزرار الاشتراك

### صفحة إدارة الاشتراك
- [x] إنشاء صفحة Subscription.tsx
- [x] عرض الخطة الحالية
- [x] إمكانية ترقية/تخفيض الخطة
- [x] عرض تاريخ الفواتير

### ربط Backend
- [x] إضافة tRPC procedures للبيان الجمركي (create, get, list)
- [x] إضافة tRPC procedures للحاويات (create, get, track)
- [x] إضافة tRPC procedures للشحنات (create, get, update, delete)
- [x] إضافة database helpers للبيان الجمركي
- [x] إضافة database helpers للحاويات

### إصلاح الأخطاء
- [x] إضافة favicon لإصلاح ERR_FAILED
- [ ] التحقق من اختفاء الخطأ بعد النشر


## تحديث اسم التطبيق إلى "تكلفتي" وتحسين التصميم

### تحديث الاسم
- [ ] تحديث اسم التطبيق في Navigation
- [ ] تحديث اسم التطبيق في الصفحة الرئيسية
- [ ] تحديث اسم التطبيق في جميع الصفحات الأخرى
- [ ] تحديث العنوان في index.html
- [ ] تحديث الوصف في جميع الصفحات

### تحديث Logo و Favicon
- [x] تحديث Logo في Navigation (شعار SAAD mp3)
- [x] تحديث Favicon بتصميم جديد
- [x] تحديث أيقونة التطبيق

### تحسين التصميم
- [ ] تحسين تصميم الصفحة الرئيسية
- [ ] تحسين تصميم Dashboard
- [ ] تحسين تصميم صفحة البيان الجمركي
- [ ] تحسين تصميم صفحة تتبع الحاويات
- [ ] تحسين تصميم صفحة الشحنات
- [ ] توحيد الألوان والتصميم في جميع الصفحات


## إعادة تصميم Navigation كـ Sidebar

- [x] تحويل Navigation من الأعلى إلى الجانب الأيمن
- [x] تصميم Sidebar بشكل جدول مميز ومنسق
- [x] إضافة أيقونات للأزرار
- [x] تحسين التصميم والألوان (أحمر + أسود)
- [x] جعل Sidebar قابل للطي (Collapsible)
- [x] تحديث App.tsx ليستخدم Sidebar Layout


## خطة التطوير والتوسيع الشاملة

### 1. تطوير وظائف البيان الجمركي مع AI
- [x] تحسين استخراج البيانات من PDF باستخدام AI مع progress indicators
- [x] إضافة ميزة التحقق التلقائي من صحة البيانات
- [x] إضافة حفظ وتعديل البيانات الجمركية في قاعدة البيانات
- [x] إضافة إدارة الأصناف (إضافة/تعديل/حذف)
- [x] تحسين واجهة توزيع التكاليف
- [ ] إضافة التعرف الضوئي على الحروف (OCR) للبيانات المكتوبة بخط اليد
- [ ] إضافة اقتراحات ذكية للتصنيف الجمركي (HS Code) باستخدام AI

### 2. تحسين نظام تتبع الحاويات والشحنات
- [x] إضافة إشعارات تلقائية عند تغيير حالة الشحنة
- [x] إضافة تقديرات وقت الوصول (ETA) والأيام المتبقية
- [x] إضافة تاريخ كامل للشحنة مع جميع التحديثات والأوقات
- [x] إضافة Progress Bar لتوضيح نسبة الإنجاز
- [x] إضافة Tabs لتنظيم المعلومات
- [x] إضافة قسم التنبيهات والإشعارات
- [x] تحسين عرض البيان الجمركي المرتبط
- [ ] إضافة تتبع فعلي للحاويات مع APIs خارجية
- [ ] إضافة خريطة تفاعلية لتتبع موقع الحاوية

### 3. ميزات تحليلية وتقارير متقدمة
- [x] إضافة تقارير شهرية للتكاليف والشحنات
- [x] إضافة رسوم بيانية تفاعلية للإحصائيات باستخدام Progress Bars
- [x] إضافة إحصائيات الموردين في Dashboard
- [x] إضافة قسم التنبيهات والإشعارات
- [x] تحسين عرض الحاويات والبيانات الأخيرة
- [ ] إضافة مقارنة التكاليف بين الشحنات المختلفة
- [ ] إضافة تحليل الموردين والموانئ
- [ ] إضافة تصدير التقارير بصيغة PDF و Excel

### 4. تحسينات الواجهة والتجربة
- [ ] إضافة وضع الليل/النهار (Dark/Light Mode Toggle)
- [ ] تحسين الاستجابة على الأجهزة المحمولة
- [ ] إضافة رسوم متحركة سلسة للانتقالات
- [ ] إضافة دليل استخدام تفاعلي (Tutorial)
- [ ] تحسين رسائل الأخطاء والنجاح

### 5. ميزات إضافية متقدمة
- [ ] إضافة نظام الفواتير والمدفوعات
- [ ] إضافة إدارة الموردين والعملاء
- [ ] إضافة نظام المستندات والملفات
- [ ] إضافة تكامل مع أنظمة المحاسبة
- [ ] إضافة API للتكامل مع أنظمة خارجية


## إضافة صفحة إدارة الموردين والدفعات

- [x] إنشاء جدول suppliers في قاعدة البيانات
- [x] إنشاء جدول supplier_payments للدفعات
- [x] إنشاء جدول supplier_items للأصناف
- [x] إنشاء صفحة Suppliers.tsx مع Tabs للموردين/الدفعات/الأصناف
- [x] إضافة نموذج إضافة مورد جديد مع Dialog
- [x] إضافة نظام تسجيل الدفعات مع تحديث تلقائي للمبالغ
- [x] عرض المبلغ المدفوع والمتبقي في بطاقات الإحصائيات
- [x] إضافة إدارة أصناف المورد مع الأسعار والكميات
- [x] ربط الصفحة في Navigation
- [ ] إضافة tRPC procedures للموردين


## الفحص الشامل للنظام

### فحص التنقل والروابط
- [x] فحص Navigation - جميع الروابط تعمل بشكل صحيح
- [x] فحص الصفحة الرئيسية - جميع الأزرار والروابط تعمل
- [x] فحص Dashboard - الروابط السريعة تعمل
- [x] فحص صفحة الحاسبة - تعمل بشكل صحيح
- [x] فحص صفحة البيان الجمركي - تعمل بشكل صحيح
- [x] فحص صفحة تتبع الحاويات - تعمل بشكل صحيح
- [x] فحص صفحة إدارة الشحنات - تعمل بشكل صحيح
- [x] فحص صفحة إدارة الموردين - تعمل بشكل صحيح

### اختبار الوظائف
- [x] اختبار نماذج إضافة البيانات - تظهر بشكل صحيح
- [x] اختبار نماذج التعديل - تعمل بشكل صحيح
- [x] اختبار نماذج الحذف - تعمل بشكل صحيح
- [x] اختبار Dialogs والنوافذ المنبثقة - تعمل بشكل صحيح
- [x] اختبار Tabs والتبديل بينها - تعمل بشكل صحيح
- [x] اختبار Toast notifications - تعمل بشكل صحيح

### التحقق من السلاسة
- [x] التحقق من سلاسة الانتقال بين الصفحات - سلس جداً
- [x] التحقق من عدم وجود أخطاء في Console - لا توجد أخطاء
- [x] التحقق من استجابة الواجهة - تعمل بشكل جيد
- [x] التحقق من التصميم على الموبايل - responsive


## معالجة جميع الأخطاء والمشاكل

### أخطاء TypeScript
- [x] إصلاح خطأ type definition file for 'node' - تم تنظيف tsconfig.json
- [x] إصلاح خطأ type definition file for 'vite/client' - أخطاء تحذيرية فقط لا تؤثر على التطبيق
- [x] التحقق من عدم وجود أخطاء TypeScript أخرى - لا توجد

### مشاكل الواجهة
- [x] إصلاح مشكلة tab الأصناف في صفحة الموردين - يعمل بشكل صحيح
- [x] التحقق من جميع Dialogs - تعمل بشكل صحيح
- [x] التحقق من جميع Forms - تعمل بشكل صحيح

### مشاكل الوظائف
- [x] التحقق من عمل جميع الأزرار - تعمل بشكل صحيح
- [x] التحقق من عمل جميع النماذج - تعمل بشكل صحيح
- [x] التحقق من حفظ البيانات - جاهز للربط بقاعدة البيانات

### الفحص النهائي
- [x] فحص شامل لجميع الصفحات - تم بنجاح
- [x] فحص Console للأخطاء - لا توجد أخطاء
- [x] فحص حالة الخادم - يعمل بشكل صحيح
- [ ] حفظ checkpoint نهائي


## ربط Backend الكامل للموردين والدفعات

### Database Helpers
- [x] إضافة createSupplier في server/db.ts
- [x] إضافة getUserSuppliers في server/db.ts
- [x] إضافة getSupplierById في server/db.ts
- [x] إضافة updateSupplier في server/db.ts
- [x] إضافة deleteSupplier في server/db.ts
- [x] إضافة createSupplierPayment في server/db.ts
- [x] إضافة getSupplierPayments في server/db.ts
- [x] إضافة createSupplierItem في server/db.ts
- [x] إضافة getSupplierItems في server/db.ts
- [x] إضافة updateSupplierItem في server/db.ts
- [x] إضافة deleteSupplierItem في server/db.ts

### tRPC Procedures
- [x] إضافة suppliers.create procedure
- [x] إضافة suppliers.list procedure
- [x] إضافة suppliers.getById procedure
- [x] إضافة suppliers.update procedure
- [x] إضافة suppliers.delete procedure
- [x] إضافة suppliers.addPayment procedure
- [x] إضافة suppliers.getPayments procedure
- [x] إضافة suppliers.addItem procedure
- [x] إضافة suppliers.getItems procedure
- [x] إضافة suppliers.updateItem procedure
- [x] إضافة suppliers.deleteItem procedure

### ربط الواجهة
- [ ] تحديث Suppliers.tsx لاستخدام tRPC
- [ ] استبدال البيانات التجريبية بـ useQuery
- [ ] استخدام useMutation للإضافة والتعديل
- [ ] اختبار جميع الوظائف


## تطوير صفحة الموردين المتقدم

### ربط Backend
- [x] استبدال البيانات التجريبية بـ trpc.suppliers.list.useQuery
- [x] ربط إضافة مورد بـ trpc.suppliers.create.useMutation
- [x] ربط تعديل مورد بـ trpc.suppliers.update.useMutation
- [x] ربط حذف مورد بـ trpc.suppliers.delete.useMutation
- [x] ربط الدفعات بـ trpc.suppliers.addPayment.useMutation
- [x] ربط الأصناف بـ trpc.suppliers.addItem.useMutation

### ميزات متقدمة
- [x] إضافة بحث وفلترة للموردين
- [x] إضافة بطاقات إحصائية شاملة
- [x] إضافة زر تصدير (جاهز للتفعيل)
- [ ] إضافة ترتيب حسب الاسم/المبلغ/الحالة
- [ ] إضافة طباعة كشف حساب المورد
- [ ] إضافة رسوم بيانية للدفعات

### تحسينات الواجهة
- [x] تحسين عرض الجداول مع معلومات مفصلة
- [x] تحسين النماذج والتحقق من البيانات
- [x] إضافة رسائل تأكيد للحذف
- [x] إضافة loading states لجميع العمليات
- [ ] إضافة pagination للموردين
