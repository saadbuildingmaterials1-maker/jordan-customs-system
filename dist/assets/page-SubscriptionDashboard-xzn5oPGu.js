import{r as d,k as s}from"./vendor-react--LObFtQ2.js";import{u as N,C as i,r,B as t,s as c,t as o,w as p,v as D}from"./components-BnSqZmHi.js";import{t as b}from"./lib-CkdQ_XLl.js";import{C as u,a2 as f,D as g}from"./vendor-utils-et65m6ZX.js";import"./contexts-Bdvxdyz0.js";import"./vendor-scoped-LnA8hRlp.js";import"./vendor-form-D568bDq1.js";import"./vendor-ui-Jmo8iXCB.js";import"./hooks-DlCg666y.js";import"./vendor-date-B3d3ZO_C.js";import"./vendor-charts-CvFoEeVU.js";import"./vendor-clsx-B-dksMZM.js";import"./vendor-lodash-T8H1R8or.js";import"./vendor-tailwind-3LUZTPgX.js";const S=({invoices:a})=>s.jsxDEV(i,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:151",children:[s.jsxDEV(c,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:152",children:[s.jsxDEV(o,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:153",className:"text-lg flex items-center gap-2",children:[s.jsxDEV(f,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:154",className:"w-5 h-5"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:154,columnNumber:11},void 0),"الفواتير"]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:153,columnNumber:9},void 0),s.jsxDEV(p,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:157",children:"سجل الفواتير والدفعات"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:157,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:152,columnNumber:7},void 0),s.jsxDEV(r,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:159",children:a.length===0?s.jsxDEV("div",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:161",className:"text-center py-8",children:[s.jsxDEV(u,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:162",className:"w-12 h-12 text-gray-300 mx-auto mb-2"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:162,columnNumber:13},void 0),s.jsxDEV("p",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:163",className:"text-gray-500",children:"لا توجد فواتير حتى الآن"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:163,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:161,columnNumber:11},void 0):s.jsxDEV("div",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:166",className:"space-y-2",children:a.map(e=>s.jsxDEV("div",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:168",className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsxDEV("div",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:172",className:"flex-1",children:[s.jsxDEV("p",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:173",className:"font-semibold text-sm",children:["الفاتورة #",e.number]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:173,columnNumber:19},void 0),s.jsxDEV("p",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:176",className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleDateString("ar-JO")},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:176,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:172,columnNumber:17},void 0),s.jsxDEV("div",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:180",className:"text-right mr-4",children:[s.jsxDEV("p",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:181",className:"font-bold",children:[(e.amount/100).toFixed(2)," ",e.currency?.toUpperCase()]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:181,columnNumber:19},void 0),s.jsxDEV(D,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:184",variant:e.status==="paid"?"default":"secondary",children:e.status==="paid"?"مدفوعة":"معلقة"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:184,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:180,columnNumber:17},void 0),s.jsxDEV(t,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:188",variant:"ghost",size:"sm",className:"ml-2",onClick:()=>{e.pdfUrl&&window.open(e.pdfUrl,"_blank")},children:s.jsxDEV(g,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:198",className:"w-4 h-4"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:198,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:188,columnNumber:17},void 0)]},e.id,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:168,columnNumber:15},void 0))},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:166,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:159,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:151,columnNumber:5},void 0);function P(){const{user:a}=N(),[e,j]=d.useState(null),[h,l]=d.useState(!1),m=b.stripe.listInvoices.useQuery({limit:10},{enabled:!!a?.id}),n=b.stripe.cancelSubscription.useMutation({onSuccess:()=>{l(!1),m.refetch()}});if(!a)return s.jsxDEV("div",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:233",className:"container mx-auto py-8",children:s.jsxDEV("div",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:234",className:"text-center",children:[s.jsxDEV(u,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:235",className:"w-12 h-12 text-red-500 mx-auto mb-4"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:235,columnNumber:11},this),s.jsxDEV("h1",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:236",className:"text-2xl font-bold mb-2",children:"يجب تسجيل الدخول"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:236,columnNumber:11},this),s.jsxDEV("p",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:237",className:"text-gray-600",children:"يرجى تسجيل الدخول لعرض لوحة تحكم الاشتراكات"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:237,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:234,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:233,columnNumber:7},this);const x=m.data?.invoices||[];return s.jsxDEV("div",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:248",className:"container mx-auto py-8",children:[s.jsxDEV("div",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:250",className:"mb-8",children:[s.jsxDEV("h1",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:251",className:"text-3xl font-bold mb-2",children:"لوحة تحكم الاشتراكات"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:251,columnNumber:9},this),s.jsxDEV("p",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:252",className:"text-gray-600",children:"إدارة اشتراكك والفواتير والفترات التجريبية"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:252,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:250,columnNumber:7},this),s.jsxDEV("div",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:256",className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxDEV("div",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:258",className:"lg:col-span-2 space-y-6",children:[s.jsxDEV(i,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:273",children:s.jsxDEV(r,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:274",className:"pt-8",children:s.jsxDEV("div",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:275",className:"text-center",children:[s.jsxDEV(u,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:276",className:"w-12 h-12 text-gray-300 mx-auto mb-4"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:276,columnNumber:19},this),s.jsxDEV("h2",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:277",className:"text-xl font-semibold mb-2",children:"لا توجد اشتراكات نشطة"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:277,columnNumber:19},this),s.jsxDEV("p",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:278",className:"text-gray-600 mb-4",children:"اختر خطة اشتراك لبدء الاستفادة من الميزات المتقدمة"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:278,columnNumber:19},this),s.jsxDEV(t,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:281",children:"اختر خطة"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:281,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:275,columnNumber:17},this)},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:274,columnNumber:15},this)},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:273,columnNumber:13},this),s.jsxDEV(S,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:288",invoices:x},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:288,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:258,columnNumber:9},this),s.jsxDEV("div",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:292",className:"space-y-6",children:[s.jsxDEV(i,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:294",children:[s.jsxDEV(c,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:295",children:s.jsxDEV(o,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:296",className:"text-lg",children:"ملخص الخطة"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:296,columnNumber:15},this)},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:295,columnNumber:13},this),s.jsxDEV(r,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:298",className:"space-y-4",children:s.jsxDEV("p",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:311",className:"text-gray-500 text-sm",children:"لا توجد خطة نشطة حالياً"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:311,columnNumber:17},this)},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:298,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:294,columnNumber:11},this),s.jsxDEV(i,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:317",children:[s.jsxDEV(c,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:318",children:s.jsxDEV(o,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:319",className:"text-lg",children:"الإجراءات السريعة"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:319,columnNumber:15},this)},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:318,columnNumber:13},this),s.jsxDEV(r,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:321",className:"space-y-2",children:[s.jsxDEV(t,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:322",variant:"outline",className:"w-full justify-start",children:"تغيير الخطة"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:322,columnNumber:15},this),s.jsxDEV(t,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:325",variant:"outline",className:"w-full justify-start",children:"تحديث طريقة الدفع"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:325,columnNumber:15},this),s.jsxDEV(t,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:328",variant:"outline",className:"w-full justify-start",children:"الحصول على الفاتورة"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:328,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:321,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:317,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:292,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:256,columnNumber:7},this),h&&e&&s.jsxDEV("div",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:338",className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxDEV(i,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:339",className:"w-full max-w-md",children:[s.jsxDEV(c,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:340",children:[s.jsxDEV(o,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:341",children:"تأكيد إلغاء الاشتراك"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:341,columnNumber:15},this),s.jsxDEV(p,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:342",children:"هل أنت متأكد من رغبتك في إلغاء الاشتراك؟"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:342,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:340,columnNumber:13},this),s.jsxDEV(r,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:346",className:"space-y-4",children:[s.jsxDEV("div",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:347",className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxDEV("p",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:348",className:"text-sm text-yellow-800",children:"سيظل لديك الوصول إلى الخدمة حتى نهاية فترة الفواتير الحالية."},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:348,columnNumber:17},this)},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:347,columnNumber:15},this),s.jsxDEV("div",{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:352",className:"flex gap-2",children:[s.jsxDEV(t,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:353",variant:"outline",className:"flex-1",onClick:()=>l(!1),children:"إلغاء"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:353,columnNumber:17},this),s.jsxDEV(t,{"data-loc":"client/src/pages/SubscriptionDashboard.tsx:360",variant:"destructive",className:"flex-1",onClick:()=>{n.mutate({subscriptionId:e})},disabled:n.isPending,children:n.isPending?"جاري الإلغاء...":"تأكيد الإلغاء"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:360,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:352,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:346,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:339,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:338,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/SubscriptionDashboard.tsx",lineNumber:248,columnNumber:5},this)}export{P as default};
