import{c as b}from"./vendor-scoped-C7BQ15g4.js";import{c as v}from"./vendor-clsx-B-dksMZM.js";import{t as z}from"./vendor-tailwind-3LUZTPgX.js";import{x as A,L as _,E as L,$ as x}from"./vendor-utils-C-KQlCEI.js";const T=b(),P="modulepreload",F=function(e){return"/"+e},f={},C=function(t,n,c){let r=Promise.resolve();if(n&&n.length>0){let w=function(o){return Promise.all(o.map(u=>Promise.resolve(u).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),a=l?.nonce||l?.getAttribute("nonce");r=w(n.map(o=>{if(o=F(o),o in f)return;f[o]=!0;const u=o.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${m}`))return;const i=document.createElement("link");if(i.rel=u?"stylesheet":P,u||(i.as="script"),i.crossOrigin="",i.href=o,a&&i.setAttribute("nonce",a),document.head.appendChild(i),u)return new Promise((E,h)=>{i.addEventListener("load",E),i.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})}))}function d(l){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=l,window.dispatchEvent(a),!a.defaultPrevented)throw l}return r.then(l=>{for(const a of l||[])a.status==="rejected"&&d(a.reason);return t().catch(d)})};function q(...e){return z(v(e))}const s={};function I(e){A(t=>{s.lcp=t.value,console.log(`[Performance] LCP: ${t.value.toFixed(2)}ms`),e?.(s)}),_(t=>{s.cls=t.value,console.log(`[Performance] CLS: ${t.value.toFixed(4)}`),e?.(s)}),L(t=>{s.fcb=t.value,console.log(`[Performance] FCP: ${t.value.toFixed(2)}ms`),e?.(s)}),x(t=>{s.ttfb=t.value,console.log(`[Performance] TTFB: ${t.value.toFixed(2)}ms`),e?.(s)})}function $(){const e=new IntersectionObserver((t,n)=>{t.forEach(c=>{if(c.isIntersecting){const r=c.target,d=r.getAttribute("data-lazy-src");d&&(r.src=d,r.removeAttribute("data-lazy-src"),n.unobserve(r))}})},{rootMargin:"50px"});return document.querySelectorAll("img[data-lazy-src]").forEach(t=>{e.observe(t)}),e}function j(){const e=new IntersectionObserver((t,n)=>{t.forEach(c=>{if(c.isIntersecting){const r=c.target;r.classList.add("lazy-loaded"),n.unobserve(r),r.dispatchEvent(new CustomEvent("lazy-load"))}})},{rootMargin:"100px"});return document.querySelectorAll("[data-lazy-component]").forEach(t=>{e.observe(t)}),e}function H(){if("memory"in performance){const e=performance.memory;return{usedJSHeapSize:e.usedJSHeapSize,totalJSHeapSize:e.totalJSHeapSize,jsHeapSizeLimit:e.jsHeapSizeLimit,percentage:e.usedJSHeapSize/e.jsHeapSizeLimit*100}}return null}function B(){I(e=>{console.log("[Performance] Metrics updated:",e)}),$(),j(),setInterval(()=>{const e=H();e&&console.log(`[Memory] ${e.percentage.toFixed(2)}% (${(e.usedJSHeapSize/1024/1024).toFixed(2)}MB / ${(e.jsHeapSizeLimit/1024/1024).toFixed(2)}MB)`)},3e4)}let g=null;function k(e){if(!e.enabled&&e.enabled!==void 0){console.log("[Analytics] Google Analytics disabled");return}if(!e.measurementId){console.log("[Analytics] Google Analytics measurement ID not provided");return}g=e;const t=document.createElement("script");t.async=!0,t.src=`https://www.googletagmanager.com/gtag/js?id=${e.measurementId}`,document.head.appendChild(t),window.dataLayer=window.dataLayer||[];function n(...c){window.dataLayer.push(arguments)}t.onload=()=>{n("js",new Date),n("config",e.measurementId,{page_path:window.location.pathname,anonymize_ip:!0}),console.log("[Analytics] Google Analytics initialized successfully")},t.onerror=()=>{console.error("[Analytics] Failed to load Google Analytics script")}}function R(e,t){g&&(typeof gtag<"u"&&gtag("event",e,t),console.log(`[Analytics] Event tracked: ${e}`,t))}function y(e,t){R("exception",{description:e.message,fatal:!1,...t}),console.error("[Analytics] Error tracked:",e,t)}let S=null;async function D(e){if(!e.enabled&&e.enabled!==void 0){console.log("[Sentry] Sentry disabled");return}S=e;try{if(!e.dsn){console.log("[Sentry] Sentry DSN not configured");return}try{(await C(()=>import("@sentry/react"),[])).init({dsn:e.dsn,environment:e.environment||"production",tracesSampleRate:e.tracesSampleRate||1}),console.log("[Sentry] Sentry initialized")}catch{console.warn("[Sentry] @sentry/react not available, skipping initialization")}}catch(t){console.warn("[Sentry] Failed to initialize Sentry:",t)}}function p(e,t){if(S){try{if(typeof window<"u"&&window.__SENTRY__){const n=window.__SENTRY__;n.captureException&&n.captureException(e,{contexts:{custom:t}})}}catch{}console.error("[Sentry] Exception captured:",e,t)}}function J(){window.addEventListener("error",e=>{const t=e.error||new Error(e.message);y(t,{type:"uncaught_error",filename:e.filename,lineno:e.lineno,colno:e.colno}),p(t,{type:"uncaught_error",filename:e.filename,lineno:e.lineno,colno:e.colno})}),window.addEventListener("unhandledrejection",e=>{const t=e.reason instanceof Error?e.reason:new Error(String(e.reason));y(t,{type:"unhandled_rejection"}),p(t,{type:"unhandled_rejection"})}),console.log("[Analytics] Global error handlers initialized")}async function U(e){e.googleAnalytics&&k(e.googleAnalytics),e.sentry&&await D(e.sentry),J()}function V(e){return new Intl.NumberFormat("ar-JO",{style:"currency",currency:"JOD",minimumFractionDigits:3,maximumFractionDigits:3}).format(e)}function W(e){const t=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];return String(e).replace(/\d/g,n=>t[parseInt(n)])}export{C as _,V as a,U as b,q as c,W as f,B as i,T as t};
