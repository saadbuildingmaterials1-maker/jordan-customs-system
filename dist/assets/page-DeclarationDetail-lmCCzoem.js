import{r as j,k as e}from"./vendor-react-D2eFX96S.js";import{am as C,m as F,h as J,ai as M,ah as P,q as c}from"./vendor-utils-gf3_Y16F.js";import{D,B as N,E as A,e as k,f as q}from"./components-DlfVS0c8.js";import{t as n}from"./lib-Dlg6jwYX.js";import"./vendor-scoped-C_CUqC-2.js";import"./vendor-form-D568bDq1.js";import"./contexts-DYnLN9N7.js";import"./vendor-ui-WlArQpJV.js";import"./hooks-n0Cgtytv.js";import"./vendor-date-B3d3ZO_C.js";import"./vendor-charts-DWT3NKsl.js";import"./vendor-lodash-B6pk_hFD.js";function Y(){const{id:s}=C(),[,r]=F(),[y,o]=j.useState(!1),[l,m]=j.useState(null),{data:t,isLoading:v}=n.customs.getDeclaration.useQuery({id:parseInt(s)},{enabled:!!s}),{data:b,isLoading:E,refetch:u}=n.items.getItems.useQuery({declarationId:parseInt(s)},{enabled:!!s}),{data:i}=n.financialSummary.getSummary.useQuery({declarationId:parseInt(s)},{enabled:!!s}),x=n.items.createItem.useMutation(),h=n.items.updateItem.useMutation(),g=n.items.deleteItem.useMutation(),V=async a=>{try{await x.mutateAsync({declarationId:parseInt(s),...a}),c.success("تم إضافة الصنف بنجاح"),await u()}catch{c.error("حدث خطأ أثناء إضافة الصنف")}},I=async a=>{if(l)try{await h.mutateAsync({id:l.id,quantity:a.quantity,unitPriceForeign:a.unitPriceForeign}),c.success("تم تحديث الصنف بنجاح"),m(null),await u()}catch{c.error("حدث خطأ أثناء تحديث الصنف")}},L=async a=>{try{await g.mutateAsync({id:a}),c.success("تم حذف الصنف بنجاح"),await u()}catch{c.error("حدث خطأ أثناء حذف الصنف")}},w=a=>{m(a),o(!0)},O=()=>{o(!1),m(null)},S=async a=>{l?await I(a):await V(a)};if(v)return e.jsxDEV(D,{"data-loc":"client/src/pages/DeclarationDetail.tsx:116",children:e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:117",className:"flex items-center justify-center min-h-screen",children:e.jsxDEV(J,{"data-loc":"client/src/pages/DeclarationDetail.tsx:118",className:"w-8 h-8 animate-spin text-accent"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:118,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:117,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:116,columnNumber:7},this);if(!t)return e.jsxDEV(D,{"data-loc":"client/src/pages/DeclarationDetail.tsx:126",children:e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:127",className:"text-center py-12",children:[e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:128",className:"text-muted-foreground mb-4",children:"البيان الجمركي غير موجود"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:128,columnNumber:11},this),e.jsxDEV(N,{"data-loc":"client/src/pages/DeclarationDetail.tsx:129",onClick:()=>r("/"),className:"btn-primary",children:"العودة للرئيسية"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:129,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:127,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:126,columnNumber:7},this);const d=Number(t.exchangeRate),p=E||x.isPending||h.isPending||g.isPending;return e.jsxDEV(D,{"data-loc":"client/src/pages/DeclarationDetail.tsx:141",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:142",className:"space-y-8",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:144",className:"flex items-center justify-between",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:145",className:"flex items-center gap-3",children:[e.jsxDEV(N,{"data-loc":"client/src/pages/DeclarationDetail.tsx:146",variant:"ghost",size:"icon",onClick:()=>r("/"),children:e.jsxDEV(M,{"data-loc":"client/src/pages/DeclarationDetail.tsx:151",className:"w-5 h-5"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:151,columnNumber:15},this)},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:146,columnNumber:13},this),e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:153",children:[e.jsxDEV("h1",{"data-loc":"client/src/pages/DeclarationDetail.tsx:154",className:"section-title",children:["البيان الجمركي #",t.declarationNumber]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:154,columnNumber:15},this),e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:157",className:"text-muted-foreground",children:new Date(t.registrationDate).toLocaleDateString("ar-JO")},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:157,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:153,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:145,columnNumber:11},this),e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:162",className:"flex gap-2",children:[e.jsxDEV(A,{"data-loc":"client/src/pages/DeclarationDetail.tsx:163",declaration:t,items:b||[],summary:i},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:163,columnNumber:13},this),e.jsxDEV(N,{"data-loc":"client/src/pages/DeclarationDetail.tsx:168",onClick:()=>r(`/declarations/${s}/variance`),className:"gap-2",variant:"outline",children:[e.jsxDEV(P,{"data-loc":"client/src/pages/DeclarationDetail.tsx:173",className:"w-4 h-4"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:173,columnNumber:15},this),"تحليل الانحرافات"]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:168,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:162,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:144,columnNumber:9},this),e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:180",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:181",className:"stat-card",children:[e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:182",className:"stat-label",children:"مركز التخليص"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:182,columnNumber:13},this),e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:183",className:"stat-value text-base",children:t.clearanceCenter},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:183,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:181,columnNumber:11},this),e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:185",className:"stat-card",children:[e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:186",className:"stat-label",children:"بلد التصدير"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:186,columnNumber:13},this),e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:187",className:"stat-value text-base",children:t.exportCountry},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:187,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:185,columnNumber:11},this),e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:189",className:"stat-card",children:[e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:190",className:"stat-label",children:"سعر التعادل"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:190,columnNumber:13},this),e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:191",className:"stat-value text-base",children:d},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:191,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:189,columnNumber:11},this),e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:193",className:"stat-card",children:[e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:194",className:"stat-label",children:"الحالة"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:194,columnNumber:13},this),e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:195",className:`stat-value text-base badge-${t.status}`,children:[t.status==="draft"&&"مسودة",t.status==="submitted"&&"مرسلة",t.status==="approved"&&"موافق عليها",t.status==="cleared"&&"مخلصة"]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:195,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:193,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:180,columnNumber:9},this),e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:205",className:"space-y-4",children:[e.jsxDEV("h2",{"data-loc":"client/src/pages/DeclarationDetail.tsx:206",className:"text-xl font-bold text-foreground",children:"الأصناف"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:206,columnNumber:11},this),e.jsxDEV(k,{"data-loc":"client/src/pages/DeclarationDetail.tsx:207",items:b||[],onEdit:w,onDelete:L,onAddNew:()=>o(!0),isLoading:p,exchangeRate:d},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:207,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:205,columnNumber:9},this),i&&e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:219",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:220",className:"card-elegant border-2 border-accent",children:[e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:221",className:"stat-label",children:"إجمالي قيمة البضاعة"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:221,columnNumber:15},this),e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:222",className:"stat-value text-accent",children:Number(i.totalFobValue).toLocaleString("ar-JO",{style:"currency",currency:"JOD",minimumFractionDigits:3})},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:222,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:220,columnNumber:13},this),e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:230",className:"card-elegant",children:[e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:231",className:"stat-label",children:"الشحن والتأمين"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:231,columnNumber:15},this),e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:232",className:"stat-value",children:Number(i.totalFreightAndInsurance).toLocaleString("ar-JO",{style:"currency",currency:"JOD",minimumFractionDigits:3})},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:232,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:230,columnNumber:13},this),e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:240",className:"card-elegant",children:[e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:241",className:"stat-label",children:"الرسوم والضرائب"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:241,columnNumber:15},this),e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:242",className:"stat-value",children:Number(i.totalCustomsAndTaxes).toLocaleString("ar-JO",{style:"currency",currency:"JOD",minimumFractionDigits:3})},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:242,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:240,columnNumber:13},this),e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:250",className:"card-elegant border-2 border-green-500",children:[e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:251",className:"stat-label",children:"التكلفة الكلية النهائية"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:251,columnNumber:15},this),e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:252",className:"stat-value text-green-600",children:Number(i.totalLandedCost).toLocaleString("ar-JO",{style:"currency",currency:"JOD",minimumFractionDigits:3})},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:252,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:250,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:219,columnNumber:11},this),e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:264",className:"card-elegant",children:[e.jsxDEV("h3",{"data-loc":"client/src/pages/DeclarationDetail.tsx:265",className:"text-lg font-bold mb-4 text-foreground",children:"معلومات الشحنة"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:265,columnNumber:11},this),e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:266",className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:267",children:[e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:268",className:"text-sm text-muted-foreground",children:"الوزن القائم"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:268,columnNumber:15},this),e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:269",className:"text-lg font-semibold",children:[Number(t.grossWeight).toLocaleString("ar-JO")," كغم"]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:269,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:267,columnNumber:13},this),e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:273",children:[e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:274",className:"text-sm text-muted-foreground",children:"الوزن الصافي"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:274,columnNumber:15},this),e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:275",className:"text-lg font-semibold",children:[Number(t.netWeight).toLocaleString("ar-JO")," كغم"]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:275,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:273,columnNumber:13},this),e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:279",children:[e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:280",className:"text-sm text-muted-foreground",children:"عدد الطرود"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:280,columnNumber:15},this),e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:281",className:"text-lg font-semibold",children:[t.numberOfPackages," ",t.packageType]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:281,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:279,columnNumber:13},this),e.jsxDEV("div",{"data-loc":"client/src/pages/DeclarationDetail.tsx:285",children:[e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:286",className:"text-sm text-muted-foreground",children:"نسبة المصاريف الإضافية"},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:286,columnNumber:15},this),e.jsxDEV("p",{"data-loc":"client/src/pages/DeclarationDetail.tsx:287",className:"text-lg font-semibold",children:[Number(t.additionalExpensesRatio).toFixed(2),"%"]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:287,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:285,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:266,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:264,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:142,columnNumber:7},this),e.jsxDEV(q,{"data-loc":"client/src/pages/DeclarationDetail.tsx:296",isOpen:y,onClose:O,onSubmit:S,initialData:l?{itemName:l.itemName,quantity:Number(l.quantity),unitPriceForeign:Number(l.unitPriceForeign)}:void 0,isLoading:p,title:l?"تعديل الصنف":"إضافة صنف جديد",exchangeRate:d},void 0,!1,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:296,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/jordan-customs-system/client/src/pages/DeclarationDetail.tsx",lineNumber:141,columnNumber:5},this)}export{Y as default};
